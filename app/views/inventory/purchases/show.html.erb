<% content_for(:page_title) { "입고 상세" } %>

<div class="max-w-4xl mx-auto">
  <div class="flex items-center justify-between mb-6">
    <div>
      <h2 class="text-lg font-semibold text-zinc-900"><%= @purchase.vendor&.name || '공급업체 없음' %></h2>
      <p class="text-sm text-zinc-500"><%= @purchase.purchased_at.strftime("%Y.%m.%d") %></p>
    </div>
    <div class="flex gap-2">
      <%= link_to edit_inventory_purchase_path(@purchase), class: "btn btn-secondary" do %>
        편집
      <% end %>
      <%= link_to inventory_purchases_path, class: "btn btn-ghost" do %>
        목록
      <% end %>
    </div>
  </div>

  <div class="card">
    <div class="px-6 py-4 border-b border-zinc-100">
      <h3 class="card-title">입고 품목</h3>
    </div>
    <% if @purchase.inventory_purchase_items.any? %>
      <div class="divide-y divide-zinc-100">
        <% @purchase.inventory_purchase_items.each do |item| %>
          <div class="px-6 py-4 flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-zinc-900"><%= item.product.name %></p>
            </div>
            <div class="flex items-center gap-6">
              <span class="text-sm text-zinc-500"><%= item.qty %>개</span>
              <span class="text-sm text-zinc-500">@<%= number_to_currency(item.unit_cost, unit: "₩", precision: 0) %></span>
              <span class="text-sm font-semibold text-zinc-900"><%= number_to_currency(item.qty * item.unit_cost, unit: "₩", precision: 0) %></span>
            </div>
          </div>
        <% end %>
      </div>
      <div class="px-6 py-4 border-t border-zinc-100 flex justify-between">
        <span class="text-sm font-medium text-zinc-900">합계</span>
        <span class="text-lg font-bold text-zinc-900"><%= number_to_currency(@purchase.inventory_purchase_items.sum { |i| i.qty * i.unit_cost }, unit: "₩", precision: 0) %></span>
      </div>
    <% else %>
      <div class="px-6 py-12 text-center">
        <p class="text-sm text-zinc-500">입고 품목이 없습니다</p>
      </div>
    <% end %>
  </div>
</div>
